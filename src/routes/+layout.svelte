<script>
	import favicon from '$lib/assets/favicon.svg';
	import Desktop from '$lib/Desktop.svelte';
	import Taskbar from '$lib/Taskbar.svelte';

	let { children } = $props();

	// global windows state (simple for now)
	let windows = [
		{
			id: 1,
			title: 'Bienvenido - Quirogama',
			width: 650,
			height: 420,
			z: 2,
			left: 200,
			top: 50,
			content:
				'Hola! Soy Quirogama.\n\nANALISTA DE DATOS & DESARROLLADOR JUNIOR\n\n‚îÅ‚îÅ‚îÅ STACK T√âCNICO ‚îÅ‚îÅ‚îÅ\n‚Ä¢ Python (Pandas, NumPy), SQL\n‚Ä¢ Power BI, Matplotlib, Seaborn\n‚Ä¢ Svelte, JavaScript, HTML/CSS\n‚Ä¢ Git, VS Code, Jupyter\n\n‚îÅ‚îÅ‚îÅ EXPERIENCIA ‚îÅ‚îÅ‚îÅ\n‚Ä¢ 6 meses en an√°lisis y visualizaci√≥n\n‚Ä¢ Reducci√≥n de 40% en tiempo de an√°lisis\n‚Ä¢ Automatizaci√≥n que procesa 10k+ registros/d√≠a\n\n‚îÅ‚îÅ‚îÅ NAVEGACI√ìN ‚îÅ‚îÅ‚îÅ\nHaz doble clic en los √≠conos del escritorio para:\n‚úì Ver CV completo\n‚úì Explorar proyectos detallados\n‚úì Acceder a GitHub y contacto\n\nAbre el panel de RESUMEN (abajo a la derecha) para ver toda la informaci√≥n.\n\nGitHub: github.com/Quirogama'
		}
	];

	let tasks = windows.map((w) => w.title);
</script>

<svelte:head>
	<link rel="icon" href={favicon} />
</svelte:head>

<div class="shell-root">
	<Desktop {windows} />
	<Taskbar {tasks} />
</div>

<!-- Panel desplegable (caja) con toda la info relevante, estilo Win98 -->
<details class="info-drawer" aria-labelledby="drawer-heading">
	<summary class="drawer-summary" aria-controls="drawer-panel">
		<span class="summary-title">ÔøΩ Resumen profesional</span>
		<span class="summary-badges">
			<span class="badge">üêç Python</span>
			<span class="badge">üìä SQL</span>
			<span class="badge">üìà Power BI</span>
			<span class="badge">‚ö° Svelte</span>
			<span class="badge">üìÅ Git</span>
		</span>
	</summary>
	<div id="drawer-panel" class="drawer-panel">
		<header class="drawer-header">
			<h1 id="drawer-heading">üíº Quirogama ‚Äî Analista de Datos y Desarrollador Junior</h1>
		</header>

		<main class="summary-grid">
			<section aria-labelledby="about-heading">
				<h2 id="about-heading">üìñ Sobre m√≠</h2>
				<p>
					<strong>Analista de Datos y Programador Junior</strong> con 6 meses de experiencia en an√°lisis, visualizaci√≥n
					y desarrollo web. Enfocado en transformar datos en insights accionables.
				</p>
				<p><strong>Especialidades:</strong> Python, SQL, Power BI, automatizaci√≥n de procesos, dashboards interactivos.</p>
			</section>

			<section aria-labelledby="skills-heading">
				<h2 id="skills-heading">üõ†Ô∏è Stack T√©cnico</h2>
				<ul>
					<li><strong>An√°lisis:</strong> Python (Pandas, NumPy), SQL, estad√≠stica</li>
					<li><strong>Visualizaci√≥n:</strong> Power BI, Matplotlib, Seaborn, Excel avanzado</li>
					<li><strong>Desarrollo:</strong> Svelte, JavaScript, HTML5, CSS3</li>
					<li><strong>Herramientas:</strong> Git, GitHub, VS Code, Jupyter Notebooks</li>
				</ul>
			</section>

			<section aria-labelledby="projects-heading">
				<h2 id="projects-heading">üöÄ Proyectos Destacados</h2>
				<ul class="projects-list">
					<li>
						<strong>üìä Dashboard Anal√≠tico</strong> (Power BI)<br>
						<em>Redujo 40% el tiempo de an√°lisis. M√©tricas en tiempo real.</em>
					</li>
					<li>
						<strong>ü§ñ Automatizaci√≥n ETL</strong> (Python)<br>
						<em>Pipeline que procesa 10,000+ registros diarios autom√°ticamente.</em>
					</li>
					<li>
						<strong>üåê Portafolio Web Interactivo</strong> (Svelte + SvelteKit)<br>
						<em>Este sitio. Est√©tica Windows 98, deploy en GitHub Pages.</em>
					</li>
				</ul>
			</section>

			<section aria-labelledby="links-heading">
				<h2 id="links-heading">üîó Enlaces</h2>
				<ul class="links-list">
					<li>
						<strong>GitHub:</strong> 
						<a href="https://github.com/Quirogama" target="_blank" rel="noopener">
							github.com/Quirogama
						</a>
					</li>
					<li>
						<strong>Portfolio:</strong> 
						<a href="https://quirogama.github.io/">quirogama.github.io</a>
					</li>
					<li>
						<strong>LinkedIn:</strong> Pr√≥ximamente
					</li>
					<li>
						<strong>CV (PDF):</strong> 
						<a href="/cv.pdf" target="_blank" rel="noopener">Descargar CV</a>
						<em style="color:#555; font-size:0.9rem;"> (coloca tu cv.pdf en la carpeta static/)</em>
					</li>
				</ul>
			</section>
		</main>

		<div class="summary-footer">
			<p>
				<strong>üí° Disponible para:</strong> An√°lisis de datos ‚Ä¢ Business Intelligence ‚Ä¢ Desarrollo web ‚Ä¢ Data Science Junior
			</p>
		</div>
	</div>
</details>

<!-- preserve route children (hidden pages/apps can be mounted here later) -->
{@render children?.()}

<style>
	    /* Panel desplegable fijo tipo Win98 */
	    .info-drawer {
	    	position: fixed;
	    	bottom: 60px; /* evitar superposici√≥n con la taskbar */
	    	right: 16px;
	    	max-width: min(95vw, 1000px);
	    	z-index: 9999;
	    	font-family: 'MS Sans Serif', Tahoma, Arial, sans-serif;
	    }

	    .drawer-summary {
	    	display: inline-flex;
	    	align-items: center;
	    	gap: 10px;
	    	padding: 6px 12px;
	    	background: #c0c0c0;
	    	border: 2px solid;
	    	border-color: #fff #000 #000 #fff;
	    	cursor: pointer;
	    	user-select: none;
	    }

	    .drawer-summary::-webkit-details-marker { display: none; }

	    .summary-title {
	    	font-weight: bold;
	    	color: #000080;
	    }

	    .summary-badges { display: none; gap: 6px; }

	    @media (min-width: 640px) {
	    	.summary-badges { display: inline-flex; }
	    }

	    .badge {
	    	display: inline-block;
	    	padding: 2px 8px;
	    	background: #c0c0c0;
	    	border: 2px solid;
	    	border-color: #fff #000 #000 #fff;
	    	font-size: 0.8rem;
	    	font-weight: bold;
	    }

	    .drawer-panel {
	    	margin-top: 8px;
	    	background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
	    	border: 3px solid #808080;
	    	box-shadow:
	    		inset -1px -1px 0 #000,
	    		inset 1px 1px 0 #fff,
	    		inset -2px -2px 0 #808080,
	    		inset 2px 2px 0 #dfdfdf;
	    	padding: 20px 18px;
	    	max-height: 70vh;
	    	overflow: auto;
	    	color: #000;
	    }

	    .drawer-header h1 {
	    	font-size: 1.2rem;
	    	margin: 0 0 12px;
	    	color: #000080;
	    	text-shadow: 1px 1px 0 rgba(255,255,255,0.5);
	    	border-bottom: 2px solid #808080;
	    	padding-bottom: 8px;
	    }

	    .summary-grid {
	    	display: grid;
	    	grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
	    	gap: 18px;
	    	margin-bottom: 16px;
	    }

	    .drawer-panel h2 {
	    	font-size: 1.05rem;
	    	margin: 0 0 10px;
	    	color: #000080;
	    	border-bottom: 1px solid #808080;
	    	padding-bottom: 4px;
	    }

	    .drawer-panel p { font-size: 0.95rem; line-height: 1.5; margin: 8px 0; }
	    .drawer-panel ul { list-style: none; padding: 0; margin: 8px 0; }
	    .drawer-panel li { font-size: 0.95rem; line-height: 1.6; margin: 6px 0; padding-left: 8px; }
	    .drawer-panel ul:not(.projects-list):not(.links-list) li::before { content: "‚ñ™ "; color: #000080; font-weight: bold; margin-right: 4px; }

	    .projects-list li { margin: 12px 0; padding: 8px; background: #fff; border: 1px solid #808080; }
	    .projects-list strong { color: #000080; }
	    .projects-list em { color: #555; font-size: 0.9rem; }

	    .links-list li { margin: 8px 0; }
	    .links-list a { color: #0000ff; text-decoration: underline; font-weight: bold; }
	    .links-list a:hover { color: #ff0000; }

	    .summary-footer { text-align: center; padding-top: 12px; border-top: 2px solid #808080; margin-top: 8px; }
	    .summary-footer p { font-size: 1rem; color: #000080; margin: 0; }
</style>
